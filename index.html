<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aura AI</title>
    <style>
        /* === –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò === */
        :root { --bg: #0f0c29; --card: rgba(255,255,255,0.08); --accent: #00d2ff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: white; font-family: -apple-system, sans-serif; overflow: hidden; }

        /* === –≠–ö–†–ê–ù "–ù–ï–¢ –°–ï–¢–ò" (–ó–ê–ì–õ–£–®–ö–ê) === */
        /* Z-index 999999 –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–Ω –ø–µ—Ä–µ–∫—Ä–æ–µ—Ç –≤—Å—ë */
        #offline-screen { 
            display: none; /* –°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); 
            z-index: 999999; 
            flex-direction: column; align-items: center; justify-content: center; 
            text-align: center; padding: 20px;
        }
        .wifi-icon { font-size: 80px; margin-bottom: 20px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; transform: scale(0.95); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.5; transform: scale(0.95); } }
        .retry-btn { margin-top: 30px; background: var(--accent); color: #000; border: none; padding: 15px 40px; border-radius: 30px; font-weight: bold; font-size: 16px; cursor: pointer; }

        /* === –ò–ù–¢–ï–†–§–ï–ô–° –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø === */
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        
        header { padding: 15px; background: rgba(0,0,0,0.3); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 900; font-size: 18px; letter-spacing: 1px; color: var(--accent); }
        .weather { font-size: 12px; text-align: right; }
        
        .content { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 80px; }
        .screen { display: none; animation: fade 0.3s; }
        .active { display: block; }
        @keyframes fade { from { opacity: 0; } to { opacity: 1; } }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .card { background: var(--card); padding: 15px; border-radius: 15px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .card:active { background: rgba(255,255,255,0.15); }
        
        /* –ß–∞—Ç */
        .bubble { background: var(--card); padding: 12px; border-radius: 15px; margin-bottom: 10px; max-width: 85%; }
        .user { background: #2575fc; align-self: flex-end; margin-left: auto; }
        
        /* –û–ø–ª–∞—Ç–∞ */
        .pay-box { background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); padding: 25px; border-radius: 20px; text-align: center; margin-top: 20px; border: 1px solid rgba(255,255,255,0.1); }
        .pay-btn { background: linear-gradient(135deg, #da22ff, #9733ee); width: 100%; border: none; padding: 15px; border-radius: 12px; color: white; font-weight: bold; margin-top: 15px; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        nav { position: fixed; bottom: 0; width: 100%; height: 65px; background: #13172e; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid rgba(255,255,255,0.1); }
        .nav-item { color: #666; font-size: 24px; padding: 10px; }
        .nav-active { color: var(--accent); }
    </style>
</head>
<body>

<div id="offline-screen">
    <div class="wifi-icon">üì°</div>
    <h2>–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</h2>
    <p style="color: #ccc; max-width: 300px; margin: 0 auto;">
        –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å Aura AI.
    </p>
    <button class="retry-btn" onclick="checkConnection()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
</div>

<div class="app-container" id="app-content">
    <header>
        <div class="logo">AURA AI</div>
        <div class="weather">
            <div id="w-temp" style="font-weight:bold; font-size:14px; color:var(--accent);">--¬∞C</div>
            <div id="w-city" style="color:#888;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </header>

    <div class="content">
        <div id="view-chat" class="screen active">
            <div id="chat-history">
                <div class="bubble">üëã –ü—Ä–∏–≤–µ—Ç! –Ø Aura. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –µ—Å—Ç—å, —è –≥–æ—Ç–æ–≤–∞ —Ä–∞–±–æ—Ç–∞—Ç—å. –í—ã–±–µ—Ä–∏ –∑–∞–¥–∞—á—É –≤ –º–µ–Ω—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.</div>
            </div>
        </div>

        <div id="view-tools" class="screen">
            <h3 style="margin-top:0;">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</h3>
            <div class="grid">
                <div class="card" onclick="fakeAction('–ü—Å–∏—Ö–æ–ª–æ–≥')">üß†<br><b>–ü—Å–∏—Ö–æ–ª–æ–≥</b></div>
                <div class="card" onclick="fakeAction('–Æ—Ä–∏—Å—Ç')">‚öñÔ∏è<br><b>–Æ—Ä–∏—Å—Ç</b></div>
                <div class="card" onclick="fakeAction('–ö–æ–¥–∏–Ω–≥')">üíª<br><b>IT –∫–æ–¥</b></div>
                <div class="card" onclick="fakeAction('Travel')">‚úàÔ∏è<br><b>Travel</b></div>
                <div class="card" onclick="fakeAction('–ü–µ—Ä–µ–≤–æ–¥')">üá¨üáß<br><b>–ü–µ—Ä–µ–≤–æ–¥</b></div>
                <div class="card" onclick="fakeAction('–†–µ–ø–µ—Ç–∏—Ç–æ—Ä')">üéì<br><b>–£—á–µ–±–∞</b></div>
            </div>
        </div>

        <div id="view-profile" class="screen">
            <div class="pay-box">
                <h3>PRO VERSION</h3>
                <p style="font-size:12px; color:#aaa;">DeepSeek V3 + –ë–µ–∑–ª–∏–º–∏—Ç</p>
                <div style="font-size:32px; font-weight:800; margin:15px 0;">990 ‚ÇΩ</div>
                <button class="pay-btn" onclick="openPay()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
            </div>
        </div>
    </div>

    <nav>
        <div class="nav-item nav-active" id="n1" onclick="tab('chat')">üí¨</div>
        <div class="nav-item" id="n2" onclick="tab('tools')">üõ†</div>
        <div class="nav-item" id="n3" onclick="tab('profile')">üë§</div>
    </nav>
</div>

<script>
    // –°–°–´–õ–ö–ê –ù–ê –û–ü–õ–ê–¢–£ (–¢–≤–æ—è —Ä–∞–±–æ—á–∞—è)
    const P_LINK = 'https://yookassa.ru/my/i/aZHd_rui8F2g/l';

    // === 1. –ì–õ–ê–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –ó–ê–ì–õ–£–®–ö–ò ===
    function checkConnection() {
        const isOnline = navigator.onLine;
        const offlineScreen = document.getElementById('offline-screen');
        const appContent = document.getElementById('app-content');

        if (isOnline) {
            offlineScreen.style.display = 'none';
            appContent.style.filter = 'none'; // –£–±–∏—Ä–∞–µ–º –±–ª—é—Ä –µ—Å–ª–∏ –±—ã–ª
        } else {
            offlineScreen.style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É
            // –ú—ã –Ω–µ —Å–∫—Ä—ã–≤–∞–µ–º appContent –ø–æ–ª–Ω–æ—Å—Ç—å—é, —á—Ç–æ–±—ã –æ–Ω –æ—Å—Ç–∞–ª—Å—è –≤ –ø–∞–º—è—Ç–∏, 
            // –Ω–æ –∑–∞–≥–ª—É—à–∫–∞ –∏–º–µ–µ—Ç z-index 999999, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∞ –ø–µ—Ä–µ–∫—Ä–æ–µ—Ç –≤—Å—ë.
        }
    }

    // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π —Å–µ—Ç–∏ (—Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
    window.addEventListener('online', checkConnection);
    window.addEventListener('offline', checkConnection);
    
    // –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞ —Å–ª—É—á–∞–π —Å–±–æ–µ–≤ —Å–ª—É—à–∞—Ç–µ–ª–µ–π) - –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
    setInterval(checkConnection, 2000);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    window.onload = () => {
        checkConnection();
        getWeather();
    };

    // === 2. –ü–û–ì–û–î–ê (–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è) ===
    async function getWeather() {
        if (!navigator.onLine) return; // –ù–µ –≥—Ä—É–∑–∏–º –µ—Å–ª–∏ –Ω–µ—Ç —Å–µ—Ç–∏
        try {
            const geo = await fetch('https://get.geojs.io/v1/ip/geo.json').then(r => r.json());
            const w = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${geo.latitude}&longitude=${geo.longitude}&current_weather=true`).then(r => r.json());
            document.getElementById('w-temp').innerText = Math.round(w.current_weather.temperature) + "¬∞C";
            document.getElementById('w-city').innerText = geo.city;
        } catch (e) {
            console.log('Weather err');
            document.getElementById('w-city').innerText = "–ú–æ—Å–∫–≤–∞";
        }
    }

    // === 3. –ò–ù–¢–ï–†–§–ï–ô–° ===
    function tab(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
        
        if(id === 'chat') { document.getElementById('view-chat').classList.add('active'); document.getElementById('n1').classList.add('nav-active'); }
        if(id === 'tools') { document.getElementById('view-tools').classList.add('active'); document.getElementById('n2').classList.add('nav-active'); }
        if(id === 'profile') { document.getElementById('view-profile').classList.add('active'); document.getElementById('n3').classList.add('nav-active'); }
    }

    function fakeAction(name) {
        tab('chat');
        const chat = document.getElementById('chat-history');
        chat.innerHTML += `<div class="bubble user">–ó–∞–ø—É—Å—Ç–∏ –∑–∞–¥–∞—á—É: ${name}</div>`;
        setTimeout(() => {
            chat.innerHTML += `<div class="bubble">–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º "${name}" —Ç—Ä–µ–±—É–µ—Ç—Å—è PRO-–≤–µ—Ä—Å–∏—è. <b onclick="tab('profile')" style="color:var(--accent);">[–ö—É–ø–∏—Ç—å]</b></div>`;
        }, 500);
    }

    function openPay() {
        if(confirm("–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ?")) {
            const a = document.createElement('a');
            a.href = P_LINK;
            a.target = '_blank';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    }
</script>
</body>
</html>
